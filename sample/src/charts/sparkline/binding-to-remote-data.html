<template>
    <section>
        <collapse-panel title="Binding to remote data" allow-collapse.bind="false">
          <div class="demo-section k-content wide">
            <!-- <au-kendo-grid scrollable.bind="true"> -->
              <table id="weather" class="weather" ref="table">
                  <thead>
                      <tr>
                          <th class="month">MONTH</th>
                          <th>MAX TEMP &deg;C</th>
                          <th>WIND SPEED KM/H</th>
                          <th>RAINFALL MM</th>
                      </tr>
                  </thead>
                  <tbody ref="body">
                  </tbody>
              </table>
            <!-- </au-kendo-grid> -->
          </div>

          <script ref="template" type="text/x-kendo-template">
              <tr>
                  <td class="month">${month}</td>
                  <td>
                    <au-kendo-sparkline data-source.bind="dataSource"
                                          auto-bind.bind="false"
                                          series.bind="tMaxSeries"/>
                  </td>
                  <td>
                    <au-kendo-sparkline data-source.bind="dataSource"
                                          auto-bind.bind="false"
                                          series.bind="wndSeries"/>
                  </td>
                  <td>
                    <au-kendo-sparkline data-source.bind="dataSource"
                                          auto-bind.bind="false"
                                          series.bind="rainSeries"/>
                  </td>
              </tr>
          </script>
        </collapse-panel>

        <collapse-panel title="Code Preview">
            <div au-kendo-tabstrip>
                <ul>
                    <li class="k-state-active">HTML</li>
                    <li>Code</li>
                </ul>
                <div>
                    <au-code language="markup">
                      <au-kendo-chart title.bind="{text: '&quot;Pocket price&quot; waterfall'}"
                                      legend.bind="{visible: false}"
                                      series.bind="series"
                                      data-source.bind="dataSource"
                                      value-axis.bind="{labels: {format: 'C'}}">
                      </au-kendo-chart>
                    </au-code>
                </div>

                <div>
                    <au-code language="javascript">
                      export class BindingToRemoteData {
                        dataSource = new kendo.data.DataSource({
                          transport: {
                            read: function(options) {
                              return System.import('charts/waterfall-charts/json/pocket-price.json!json')
                              .then(data => options.success(data));
                            }
                          }
                        });

                        series = [{
                            type: "waterfall",
                            field: "value",
                            summaryField: "summary",
                            categoryField: "name",
                            labels: {
                                visible: true,
                                position: "outsideEnd",
                                format: "C"
                            },
                            color: function(point) {
                                var summary = point.dataItem.summary;
                                if (summary) {
                                    return summary == "total" ? "#555" : "gray";
                                }

                                if (point.value > 0) {
                                    return "green";
                                } else {
                                    return "red";
                                }
                            }
                        }];
                      }
                    </au-code>
                </div
            </div>
        </collapse-panel>
    </section>

    <style>
        .demo-section .k-chart {
            width: auto;
            height: auto;
        }
        .k-grid {
            max-width: 700px;
            margin: 0 auto;
        }
    </style>
</template>
