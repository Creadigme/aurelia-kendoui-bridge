<template>
    <section>
        <collapse-panel title="Binding to local data" allow-collapse.bind="false">
          <au-kendo-chart title.bind="{text: 'Cash flow'}"
                          data-source.bind="{data: cashFlowData}"
                          legend.bind="{visible: false}"
                          series.bind="series"
                          value-axis.bind="{labels: {format: 'C0'}}">
          </au-kendo-chart>
        </collapse-panel>

        <collapse-panel title="Code Preview">
            <div au-kendo-tabstrip>
                <ul>
                    <li class="k-state-active">HTML</li>
                    <li>Code</li>
                </ul>
                <div>
                    <au-code language="markup">
                      <au-kendo-chart title.bind="{text: 'Cash flow'}"
                                      data-source.bind="{data: cashFlowData}"
                                      legend.bind="{visible: false}"
                                      series.bind="series"
                                      value-axis.bind="{labels: {format: 'C0'}}">
                      </au-kendo-chart>
                    </au-code>
                </div>

                <div>
                    <au-code language="javascript">
                      export class BindingToLocalData {

                        cashFlowData = [{
                            period: "Beginning\nBalance",
                            amount: 50000
                        }, {
                            period: "Jan",
                            amount: 17000
                        }, {
                            period: "Feb",
                            amount: 14000
                        }, {
                            period: "Mar",
                            amount: -12000
                        }, {
                            period: "Q1",
                            summary: "runningTotal"
                        }, {
                            period: "Apr",
                            amount: -22000
                        }, {
                            period: "May",
                            amount: -18000
                        }, {
                            period: "Jun",
                            amount: 10000
                        }, {
                            period: "Q2",
                            summary: "runningTotal"
                        }, {
                            period: "Ending\nBalance",
                            summary: "total"
                        }];

                        series = [{
                            type: "waterfall",
                            field: "amount",
                            categoryField: "period",
                            summaryField: "summary",
                            color: function(point) {
                                var summary = point.dataItem.summary;
                                if (summary) {
                                    return summary == "total" ? "#555" : "gray";
                                }

                                if (point.value > 0) {
                                    return "green";
                                } else {
                                    return "red";
                                }
                            },
                            labels: {
                                visible: true,
                                format: "C0",
                                position: "insideEnd"
                            }
                        }]
                      }
                    </au-code>
                </div
            </div>
        </collapse-panel>
    </section>
</template>
