<template>
    <section>
        <collapse-panel title="Binding to grouped data" allow-collapse.bind="false">
            <au-kendo-chart title.bind="{text: 'Stock Prices'}"
                            data-source.bind="datasource"
                            legend.bind="{position: 'bottom'}"
                            series.bind="series"
                            value-axis.bind="valueAxis"
                            category-axis.bind="categoryAxis"
                            tooltip.bind="tooltip">
            </au-kendo-chart>
        </collapse-panel>

        <collapse-panel title="Code Preview">
            <div au-kendo-tabstrip>
                <ul>
                    <li class="k-state-active">HTML</li>
                    <li>Code</li>
                    <li>Description</li>
                </ul>
                <div>
                    <au-code language="markup">
                       <au-kendo-chart title.bind="{text: 'Stock Prices'}"
                                        data-source.bind="datasource"
                                        legend.bind="{position: 'bottom'}"
                                        series.bind="series"
                                        value-axis.bind="valueAxis"
                                        category-axis.bind="categoryAxis"
                                        tooltip.bind="tooltip">
                        </au-kendo-chart>
                    </au-code>
                </div>

                <div>
                    <au-code language="javascript">
                      export class BindingToGroupedData {
                        datasource = new kendo.data.DataSource({
                          transport: {
                            read: function(options) {
                              return System.import('charts/line-charts/json/stock-data-2011.json!json')
                              .then(data => options.success(data));
                            }
                          },

                          group: {
                            field: "symbol"
                          },

                          sort: {
                            field: "date",
                            dir: "asc"
                          },

                          schema: {
                            model: {
                              fields: {
                                date: {
                                  type: "date"
                                }
                              }
                            }
                          }
                        });

                        series = [{
                            type: "column",
                            field: "close",
                            name: "${group.value} (close)"
                        }];

                        valueAxis = {
                            labels: {
                                format: "${0}",
                                skip: 2,
                                step: 2
                            },
                            line: {
                                visible: false
                            },
                            max: 700
                        };

                        categoryAxis = {
                            field: "date",
                            labels: {
                                format: "MMM"
                            },
                            line: {
                                visible: false
                            },
                            majorGridLines: {
                                visible: false
                            }
                        };

                        tooltip = {
                            visible: true,
                            format: "{0}%",
                            template: "${series.name} - ${value}%"
                        };
                      }
                    </au-code>
                </div>

                <div>
                    <au-markdown>
                        The Kendo UI chart can be bound to a grouped data by using [Kendo UI DataSource](http://docs.telerik.com/kendo-ui/api/javascript/data/datasource) as a mediator. To do so follow the steps below:

                        1. Bind the chart to a [Kendo UI DataSource instance](http://docs.telerik.com/KENDO-UI/api/javascript/dataviz/ui/chart#configuration-dataSource).
                        2. Set the [DataSource.group.field property](http://docs.telerik.com/KENDO-UI/api/javascript/dataviz/ui/chart#configuration-dataSource) to the name of the column in the underlying data which will be the criteria for grouping the chart series items into series (symbol in this example)
                        3. Bind the series.field setting to the “close” field in the underlying data source
                        4. Bind the categoryAxis.field attribute to the "date" field in the source

                        This will result in as many series as the number of distinct values in the column (i.e., DataSource.group.field). For each value there will be chart series in the chart.
                    </au-markdown>
                </div>            </div>
        </collapse-panel>
    </section>
</template>
